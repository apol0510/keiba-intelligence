# Prediction Converter テストケース集
#
# このファイルは prediction-converter.astro の動作確認・回帰テスト用サンプルデータです。
# 各サンプルは「馬番,馬名,pt」形式（1行1頭）で記述されています。
#
# 改修時の保険として、これらのサンプルで期待通りの出力が得られることを確認してください。

# ============================================
# サンプル1: 基本ケース（11頭立て）
# ============================================
# 説明: pt降順で役割が正しく割り当てられる標準的なケース
# 期待される役割:
#   - 本命: 1番（90pt）
#   - 対抗: 2番（86pt）
#   - 単穴: 3番（82pt）、4番（77pt）
#   - 連下: 5〜8番（70, 70, 70, 67pt）
#   - 抑え: 9〜11番（66, 66, 66pt）
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,マコスペシャル,90
2,クロチャンプ,86
3,ケイバスター,82
4,ナンカンキング,77
5,オオイプリンス,70
6,カワサキホープ,70
7,フナバシドリーム,70
8,ウラワエース,67
9,インテリジェンス,66
10,ダッシュボード,66
11,サウスマスター,66

# ============================================
# サンプル2: 本命絶対軸固定ケース（89〜90pt）
# ============================================
# 説明: 本命ptが89〜90の範囲にあるため、本命枠が絶対軸固定される
# ルール①適用: 本命 89 <= pt <= 90 → 本命枠のみ固定、対抗以下は調整対象
# 期待される役割:
#   - 本命: 1番（89.5pt）【固定】
#   - 対抗: 2番（87pt）
#   - その他: 通常ルールで調整
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,アブソリュートアクシス,89.5
2,タイコウランナー,87.0
3,タンケツスター,83.0
4,ケツガタホース,78.0
5,レンカマスター,71.0
6,レンカランナー,71.0
7,レンカプリンス,71.0
8,オサエキング,68.0
9,オサエプリンス,67.0
10,オサエホープ,67.0
11,オサエドリーム,67.0

# ============================================
# サンプル3: 本命昇格ケース（本命pt ≤86）
# ============================================
# 説明: 本命ptが86以下のため、対抗を本命に昇格、単穴を対抗に昇格
# ルール③適用: 本命pt ≤86 → 対抗を本命に昇格、単穴最上位を対抗に昇格
# 期待される役割:
#   - 本命: 2番（85pt → 旧対抗を本命に昇格）
#   - 対抗: 1番（85pt → 旧本命を対抗に降格）、3番（82pt → 旧単穴を対抗に昇格）
#   - 単穴: 4番（77pt）
#   - 連下: 5〜8番
#   - 抑え: 9〜11番
# 期待される買い目: 2-1.3.4.5.6.7.8(抑え9.10.11) or類似

1,ロープリオリティ,85.0
2,セカンドチョイス,85.0
3,サードオプション,82.0
4,フォースランナー,77.0
5,レンカファイブ,70.0
6,レンカシックス,70.0
7,レンカセブン,70.0
8,レンカエイト,67.0
9,オサエナイン,66.0
10,オサエテン,66.0
11,オサエイレブン,66.0

# ============================================
# サンプル4: 本命-対抗pt差3pt以内（入れ替え判定）
# ============================================
# 説明: 本命と対抗のpt差が3pt以内のため、馬番昇順で入れ替え判定
# ルール②適用: 本命-対抗pt差 ≤3 → 馬番昇順で入れ替え
# 1番92pt vs 2番90pt（pt差2pt） → 馬番1 < 2なので入れ替えなし
# 期待される役割:
#   - 本命: 1番（92pt）
#   - 対抗: 2番（90pt）
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,クロースコール,92.0
2,セカンドプレイス,90.0
3,サードチョイス,85.0
4,フォースホース,80.0
5,レンカフィフス,72.0
6,レンカシックス,72.0
7,レンカセブン,72.0
8,レンカエイト,69.0
9,オサエナイン,68.0
10,オサエテン,68.0
11,オサエイレブン,68.0

# ============================================
# サンプル5: 対抗-単穴pt差3pt以内（入れ替え判定）
# ============================================
# 説明: 対抗と単穴最上位のpt差が3pt以内のため、馬番昇順で入れ替え判定
# ルール④適用: 対抗-単穴pt差 ≤3 → 馬番昇順で入れ替え
# 2番86pt vs 3番84pt（pt差2pt） → 馬番2 < 3なので入れ替えなし
# 期待される役割:
#   - 本命: 1番（92pt）
#   - 対抗: 2番（86pt）
#   - 単穴: 3番（84pt）、4番（80pt）
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,ホンメイキング,92.0
2,タイコウプリンス,86.0
3,タンケツトップ,84.0
4,タンケツセカンド,80.0
5,レンカワン,73.0
6,レンカツー,73.0
7,レンカスリー,73.0
8,レンカフォー,70.0
9,オサエワン,69.0
10,オサエツー,69.0
11,オサエスリー,69.0

# ============================================
# サンプル6: 単穴下位-連下上位pt差2pt以内（入れ替え判定）
# ============================================
# 説明: 単穴下位と連下最上位のpt差が2pt以内のため、馬番昇順で入れ替え判定
# ルール⑤適用: 単穴下位-連下上位pt差 ≤2 → 馬番昇順で入れ替え
# 4番78pt vs 5番77pt（pt差1pt） → 馬番4 < 5なので入れ替えなし
# 期待される役割:
#   - 本命: 1番（92pt）
#   - 対抗: 2番（86pt）
#   - 単穴: 3番（82pt）、4番（78pt）
#   - 連下: 5番（77pt）〜8番（74pt）
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,ファーストスター,92.0
2,セカンドエース,86.0
3,サードランナー,82.0
4,フォースプレイ,78.0
5,フィフスチョイス,77.0
6,シックスホープ,76.0
7,セブンドリーム,75.0
8,エイトチャンス,74.0
9,ナインスペア,70.0
10,テンスペア,70.0
11,イレブンスペア,70.0

# ============================================
# サンプル7: 同点馬が複数（馬番昇順ルール確認）
# ============================================
# 説明: 同点の馬が複数いる場合、馬番昇順で優先される
# 期待される役割:
#   - 本命: 1番（90pt）
#   - 対抗: 2番（85pt）
#   - 単穴: 3番（85pt）、4番（85pt）【同点なので馬番昇順で選抜】
#   - 連下: 5〜8番（80pt同点 → 馬番昇順）
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,ナンバーワン,90.0
2,イコールツー,85.0
3,イコールスリー,85.0
4,イコールフォー,85.0
5,タイファイブ,80.0
6,タイシックス,80.0
7,タイセブン,80.0
8,タイエイト,80.0
9,タイナイン,75.0
10,タイテン,75.0
11,タイイレブン,75.0

# ============================================
# サンプル8: 小数ptケース（pt計算外部実施の確認）
# ============================================
# 説明: 外部でpt計算済みのため、小数ptも正しく処理される
# 期待される役割:
#   - 本命: 1番（91.3pt）
#   - 対抗: 2番（87.8pt）
#   - 単穴: 3番（84.2pt）、4番（79.6pt）
# 期待される買い目: 1-2.3.4.5.6.7.8(抑え9.10.11)

1,デシマルキング,91.3
2,フロートプリンス,87.8
3,ポイントランナー,84.2
4,スモールフラクション,79.6
5,ミドルデシマル,73.4
6,ロワーポイント,73.1
7,タイニーフロート,72.9
8,マイナーデシマル,70.5
9,スペアワン,68.2
10,スペアツー,68.0
11,スペアスリー,67.8

# ============================================
# 使用方法
# ============================================
# 1. 上記のサンプルをコピー
# 2. /admin/prediction-converter にアクセス
# 3. レース情報を入力（例: 2026-01-12, 大井, 1R）
# 4. 馬データフィールドにサンプルをペースト
# 5. 「予想データ生成」ボタンをクリック
# 6. 期待される買い目と一致することを確認

# ============================================
# 注意事項
# ============================================
# - 入力データに旧用語（特徴量重要度、累積スコア等）が含まれていても、pt値が正しく抽出できればOK
# - 出力JSONには旧用語が一切含まれないことを確認
# - 同点の場合は必ず馬番昇順で処理されることを確認
# - 本命固定ケース（89〜90pt）では、対抗以下のみが調整対象となることを確認
